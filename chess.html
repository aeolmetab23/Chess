<!DOCTYPE html>
<html>
<body>

<h1>Thy Chess</h1>

<canvas id="myCanvas" width="640" height="640" style="border:2px solid #000000;">
</canvas>

<script>
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");

class square{
  constructor(row,col,hasPiece){
    this.row = row;
    this.col = col;
    this.hasPiece = hasPiece;
  }
  draw(){
    ctx.beginPath();
    ctx.lineWidth = "3";
    ctx.strokeStyle = "black";
    ctx.rect(this.row*80, this.col*80, 80, 80);
    ctx.stroke();
    ctx.fillStyle = this.fillcolor();
    ctx.fill();
  }
  highlight(){
    ctx.beginPath();
    ctx.lineWidth = "3";
    ctx.strokeStyle = "yellow";
    ctx.rect(this.row*80, this.col*80, 80, 80);
    ctx.stroke();
  }
  fillcolor(){
    if (((this.row)+(this.col))%2 == 0) {
      return "peru";
    }
    else {
      return "olivedrab";
    }
  }
  hasPiece(){
    return this.hasPiece;
  }
}

// Create one dimensional array
var gameBoard = new Array(8);
// Loop to create 2D array using 1D array
for (let row = 0; row < 8; row++) {
    gameBoard[row] = new Array(8);
}
// Loop to initialize 2D array elements (game board).
for (let row = 0; row < 8; row++) {
  for (let col = 0; col < 8; col++) {
    const currSquare = new square(row,col,false);
    gameBoard[row][col] = currSquare;
  }
}

//draw game board
function drawBoard(){
  for (let row = 0; row < 8; row++) {
    for (let col = 0; col < 8; col++) {
      gameBoard[row][col].draw();
    }
  }
}

function placePieces(){
  for (let col = 0; col < 8; col++){
    const currPawn = new pawn(6, col);
    currPawn.place();
    gameBoard[6][col].hasPiece = true;
  }
}

class piece{
  constructor(row, col){
    this.row = row;
    this.col = col;
  }
  place(){
    var img = new Image(),
    row = this.col*80,
    col = this.row*80;
    img.onload = function(){
      ctx.drawImage(img, row, col, 80, 80);
    }
    img.src = this.pic();
  }
}

class pawn extends piece{
  pic(){
    return "whitePawn.png"
  }
}

drawBoard();
placePieces();

function printMousePos(event) {
  if (event.clientX > 10 && event.clientX < 650 && event.clientY > 80 && event.clientY < 720){
    var row = Math.floor((event.clientX - 10)/80);
    var col = Math.floor((event.clientY - 80)/80);
    drawBoard();
    placePieces();
    if (gameBoard[col][row].hasPiece){
      gameBoard[row][col].highlight();
    }
  }
}

document.addEventListener("click", printMousePos);

</script>

</body>
</html>
